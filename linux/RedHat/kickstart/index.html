<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Kickstart - My Docs</title>
  

  <link rel="shortcut icon" href="../../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/highlight.css">
  <link href="../../../networking/build/css/freezeframe_styles.css" rel="stylesheet">
  <link href="../../../networking/build/css/freezeframe_styles.min.css" rel="stylesheet">
  <link href="../../../networking/freezeframe.js/build/css/freezeframe_styles.css" rel="stylesheet">
  <link href="../../../networking/freezeframe.js/build/css/freezeframe_styles.min.css" rel="stylesheet">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Kickstart";
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js"></script>
  <script src="../../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../../js/highlight.pack.js"></script>
  <script src="../../../js/theme.js"></script> 
  <script src="../../../networking/build/js/freezeframe.js"></script>
  <script src="../../../networking/build/js/freezeframe.min.js"></script>
  <script src="../../../networking/build/js/freezeframe.pkgd.js"></script>
  <script src="../../../networking/build/js/freezeframe.pkgd.min.js"></script>
  <script src="../../../networking/freezeframe.js/gulpfile.js"></script>
  <script src="../../../networking/freezeframe.js/build/js/freezeframe.js"></script>
  <script src="../../../networking/freezeframe.js/build/js/freezeframe.min.js"></script>
  <script src="../../../networking/freezeframe.js/build/js/freezeframe.pkgd.js"></script>
  <script src="../../../networking/freezeframe.js/build/js/freezeframe.pkgd.min.js"></script>
  <script src="../../../networking/freezeframe.js/src/js/freezeframe.js"></script>
  <script src="../../../networking/freezeframe.js/src/js/vendor/imagesloaded.pkgd.js"></script>
  <script src="../../../networking/freezeframe.js/src/js/vendor/jquery-2.1.4.js"></script>
  <script src="../../../networking/src/js/freezeframe.js"></script>
  <script src="../../../networking/src/js/vendor/imagesloaded.pkgd.js"></script>
  <script src="../../../networking/src/js/vendor/jquery-2.1.4.js"></script>

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> My Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../../map/">Map</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Programming</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../programming/map/">Map</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>C programming</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../programming/c_programming/fork_and_maloc_demo/">Fork and maloc demo</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../programming/c_programming/fork_demo_menu/">Fork demo menu</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../programming/c_programming/linux_clocksource_benchmark/">Linux clocksource benchmark</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../programming/c_programming/programmable_keyboard/">Programmable keyboard</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Puppet</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../puppet/puppet_study_notes/">Puppet study notes</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Scripting</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/Column_tally/">Column tally</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/Convert_kilobytes_to_MB_GB_TB_PB/">Convert kilobytes to MB GB TB PB</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/DNS_validate_entries/">DNS validate entries</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/IP_survey/">IP survey</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/Shuffle_deck_of_cards/">Shuffle deck of cards</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_and_grep_script_to_compare_2_lists/">Bash and grep script to compare 2 lists</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_argument_shift_until_loop/">Bash argument shift until loop</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_argument_shift_while_loop/">Bash argument shift while loop</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_arguments/">Bash arguments</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_capture_keyboard_entry/">Bash capture keyboard entry</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_case/">Bash case</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_fail_and_exit/">Bash fail and exit</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_fail_trap/">Bash fail trap</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_function/">Bash function</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_functions/">Bash functions</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_local_vs_global_variables/">Bash local vs global variables</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_nested_if_else/">Bash nested if else</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_read_input/">Bash read input</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_scripting/">Bash scripting</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_select/">Bash select</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_sort/">Bash sort</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_string_comparison/">Bash string comparison</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_test_to_only_run_as_root/">Bash test to only run as root</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_tips/">Bash tips</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_trap_user_ctrl-c/">Bash trap user ctrl c</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/bash_wait_for_user_input/">Bash wait for user input</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/diff/">Diff</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/expect/">Expect</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/map/">Map</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/script_to_markdown/">Script to markdown</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/simulate_site_failure/">Simulate site failure</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scripting/use_a_file_to_control_bash_script_operation/">Use a file to control bash script operation</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Networking</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../networking/traceroute_animation_1_and_2_routers/">Traceroute animation 1 and 2 routers</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../networking/traceroute_animation_1_router/">Traceroute animation 1 router</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../networking/traceroute_animation_2_routers/">Traceroute animation 2 routers</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Linux</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../hot_add_memory_and_cpus/">Hot add memory and cpus</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../linux_proccess_signaling/">Linux proccess signaling</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../map/">Map</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Networking</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Networking/check_dns_records/">Check dns records</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Networking/determine_the_routes_a_packet_will_take/">Determine the routes a packet will take</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Networking/linux_networking/">Linux networking</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Networking/local_IP_address_survey/">local IP address survey</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Firewalls and Security</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Firewalls_and_Security/auditd_rules/">Auditd rules</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Firewalls_and_Security/iptables_notes/">Iptables notes</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Software Packaging</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Software_Packaging/apt_get/">Apt get</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Core Utils</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Core_Utils/awk/">Awk</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Core_Utils/bash_shortcuts/">Bash shortcuts</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Core_Utils/rename/">Rename</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Core_Utils/spacecmd_breaking_up_large_groups_of_hosts_with_awk/">Spacecmd breaking up large groups of hosts with awk</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Core_Utils/user_creation/">User creation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Core_Utils/watch_and_timeout/">Watch and timeout</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Clustering</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Clustering/HA_LVM_automatic_failover/">HA LVM automatic failover</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Clustering/HA_LVM_automatic_failover_manual_fence_override/">HA LVM automatic failover manual fence override</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Clustering/HA_LVM_cluster_build/">HA LVM cluster build</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Clustering/HA_LVM_cluster_build_guide/">HA LVM cluster build guide</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Clustering/HA_LVM_manual_failover.txt/">HA LVM manual failover.txt</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Clustering/RHEL4_cluster_installation/">RHEL4 cluster installation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Clustering/cluster_website/">Cluster website</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Clustering/homemade_cluster/">Homemade cluster</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Clustering/simple.cluster.conf/">Simple.cluster.conf</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Time</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Time/Adventures_in_the_land_of_symmetric_ntp_authentication/">Adventures in the land of symmetric ntp authentication</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Time/Setting_time/">Setting time</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Time/linux_clocksource_benchmark-2.c/">Linux clocksource benchmark 2.c</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>RedHat</span></li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Kickstart</a>
        
            <ul>
            
            </ul>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Satellite spacewalk</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../satellite_spacewalk/perl_script_to_calulate_uptime_of_satellite_clients/">Perl script to calulate uptime of satellite clients</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../satellite_spacewalk/replacing_your_satellite_certificate/">Replacing your satellite certificate</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../satellite_spacewalk/satellite_certificate_licence_install/">Satellite certificate licence install</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../satellite_spacewalk/using_spacecmd/">Using spacecmd</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Yum rpm</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../yum_rpm/create_local_repos_from_redhat_install_media/">Create local repos from redhat install media</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../yum_rpm/working_with_yum_and_rpm/">Working with yum and rpm</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../yum_rpm/yum_and_rpm/">Yum and rpm</a>
        
    </li>

        
    </ul>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Commands</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Commands/email_on_linux/">Email on linux</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Commands/hot_add_memory/">Hot add memory</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Monitoring</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Monitoring/nagios_2.6_install/">Nagios 2.6 install</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Disks and File Systems</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Disks_and_File_Systems/Extend_lvm_filesystem/">Extend lvm filesystem</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Disks_and_File_Systems/Linux_LVM_Logical_Volume_Manager/">Linux LVM Logical Volume Manager</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Disks_and_File_Systems/Listing_Oracle_ASM_disks/">Listing Oracle ASM disks</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Disks_and_File_Systems/Multipath_and_NetApp_fixes/">Multipath and NetApp fixes</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Disks_and_File_Systems/Online_lun_resize/">Online lun resize</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Disks_and_File_Systems/RHEL_floppy_kickstart/">RHEL floppy kickstart</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Disks_and_File_Systems/boot_cdrom_dvdrom/">Boot cdrom dvdrom</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Disks_and_File_Systems/disk_filesystem_partition_imaging_using_squashfs_and_dd/">Disk filesystem partition imaging using squashfs and dd</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Disks_and_File_Systems/filesystem_shuffle/">Filesystem shuffle</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Disks_and_File_Systems/rsync/">Rsync</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../Disks_and_File_Systems/shrink_lvm_filesystem/">Shrink lvm filesystem</a>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">My Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
        
          <li>RedHat &raquo;</li>
        
      
    
    <li>Kickstart</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <pre><code>#  kickstart file created by Seamus Nov 29 2006


#  The following tasks are AutoMagicly configured with this script



#  The hard disks will be zeroed but you will be prompted for a partition scheme
#  User and Group accounts for the unix team will be added
#  The Unix team will be granted FULL Sudo access
#  The Message Of The Day will be set
#  the (CTRL/ALT/DEL) key combination will be disabled on the physical console 
#  Xinetd will be disabled (wont start up automatically)
#  Various Services will be disabled (wont start up automatically)
#  Various default redhat user accounts will be deleted
#  Remote loggin to the root account via SSH will be disabled
#  The ntpdaemon will be configured started and synced
#  The mondo packages and configuration files will be installed
#  The nagios agents will be installed
#  The strange label created by the installer for the swap partition is changed in the fstab file
#  A custom grub splash screen is copied



#  There is a separate file for configuring host for oracle

# dont forget that during the post install script phase you can switch to virtual terminal 3 and 4 
# and see what the script is doing. This is why there are so many echo's in this file





#System  language
lang en_AU

#Language modules to install
langsupport en_AU

#System keyboard
keyboard us

#System mouse
mouse

#Sytem timezone
timezone Moon/Crater

#Root password
rootpw --iscrypted xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

#Reboot after installation
reboot

#Use text mode install
text

#Install OS instead of upgrade
install

#Use NFS installation Media

nfs --server=xxx.xxx.com  --dir=/u1/Distros/rhes4u3/install

#System bootloader configuration
bootloader --location=mbr

#Clear the Master Boot Record
zerombr yes


# the following line will cause KickStart to ignor SAN disks during the OS install
ignoredisk --drives=sda,sdb,sdc,sdd,sde,sdf,sdg,sdh


#Partition clearing information
clearpart --all --initlabel 
part / --fstype ext3 --size 20480 --asprimary 
part /boot --fstype ext3 --size 150 --asprimary 
#part swap --size 4096
#part swap --size 8192
part swap --size 5120
part /var --fstype ext3 --size 5120
part /opt --fstype ext3 --size 25600
part /usr --fstype ext3 --size 5120 --asprimary 
part /tmp --fstype ext3 --size 5120
part /backup  --fstype ext3 --size 1 --grow

#System authorization infomation
auth  --useshadow  --enablemd5

#Network information
network --bootproto=dhcp --device=eth0

#Firewall configuration
firewall --disabled

#Do not configure XWindows
skipx

#Package install information
%packages --resolvedeps
@ base-x
@ text-internet
#@ ftp-server
#@ web-server
#@ development-tools
#@ admin-tools
#@ system-tools
kernel-smp
-system-config-httpd
-webalizer
lvm2
grub
-postfix
-squid
-spamassassin
-cadaver
-fetchmail
e2fsprogs
mkisofs
busybox
cdrecord

#oracle needs the following
binutils
compat-db
control-center
gcc
gcc-c++
glibc
glibc-common
gnome-libs
libstdc++
libstdc++-devel
make
pdksh
sysstat
xscreensaver
libaio

# docuemntum needs the following
#compat-libstdc++-296
#compat-libstdc++-33
compat-gcc-32
compat-gcc-32-c++



########### POST CONFIGURATIONS BEGIN AT THIS POINT ##############


%post
#

echo "setting time"
ntpdate ntp.ntp.com



echo "# disable the startup of unnecessary services"

chkconfig microcode_ctl off
chkconfig netfs off
chkconfig saslauthd off
chkconfig mdmonitor off
chkconfig mdmpd off
chkconfig irda off
chkconfig psacct off
chkconfig isdn off
chkconfig pcmcia off
chkconfig autofs off
#chkconfig portmap off
#chkconfig nfs off
#chkconfig nfslock off
chkconfig cups off
chkconfig dc_client off
chkconfig arptables_jf off
chkconfig dc_server off
chkconfig bcm5820 off
chkconfig squid off
chkconfig named off
chkconfig tux off
chkconfig cups off


echo  "removing unnecessary user accounts"

userdel lp
userdel sync
userdel shutdown
userdel halt
userdel mail
userdel news
userdel uucp
userdel operator
userdel games
userdel gopher
userdel ftp
userdel nscd
userdel rpc
userdel rpcuser
userdel mailnull
userdel xfs
userdel gdm
userdel desktop
userdel squid
userdel named

userdel ldap
userdel netdump

echo "#"
echo "# Disabling SSH ROOT login"
echo "#"
cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bak
sed -e "s/\#PermitRootLogin/PermitRootLogin\ no\#/" /etc/ssh/sshd_config.bak &gt; /etc/ssh/sshd_config
echo;echo



echo "# Creating /etc/ntp.conf file..."

cp /etc/ntp.conf /etc/ntp.conf.bak




cat &lt;&lt;EOF &gt;/etc/ntp.conf

# this file was created by the XXXX Custom kickstart script
# Permit time synchronization with our time source, but do not
# permit the source to query or modify the service on this system.
restrict default nomodify notrap noquery

restrict 127.0.0.1
driftfile /var/lib/ntp/drift
broadcastdelay  0.008
keys            /etc/ntp/key

# add Time servers
server 10.10.10.10

EOF



echo "# SYNC WITH NTP SERVER"
service ntpd stop
ntpdate 10.10.10.10

echo "# STARTING NTP SERVICE"

/etc/init.d/ntpd start


echo "# Configuring Console access rights"

cat &lt;&lt;EOF &gt;/etc/default/console
CONSOLE=/dev/console
PASSREQ=YES
PATH=/usr/bin:
RETRIES=2
SLEEPTIME=4
SUPATH=/usr/sbin:/usr/bin:
SYSLOG=YES
SYSLOG_FAILED_LOGINS=2
TIMEOUT=60
UMASK=027
EOF


echo "# Configuring Password Parameters"

cat &lt;&lt;EOF &gt;/etc/default/passwd
MAXWEEKS=5
MINWEEKS=0
PASSLENGTH=7
EOF



touch /.rhosts /.netrc /etc/hosts.equiv
chmod 0 /.rhosts /.netrc /etc/hosts.equiv


echo "# Setup admin user accounts and passwords"


groupadd -g 2000 UNIX
useradd XXXXX -u 99999 -c "XXXXX XXXXX " -p 'XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXx' -d /home/XXXXX





echo "# Creating SUDO permissions for UNIX team..."

cat &lt;&lt;EOF &gt;/etc/sudoers

# sudoers file.
#
# This file MUST be edited with the 'visudo' command as root.
#
# See the sudoers man page for the details on how to write a sudoers file.
#

# Host alias specification

# User alias specification

# Cmnd alias specification

# Defaults specification

# User privilege specification
root    ALL=(ALL) ALL
XXXXX   ALL=(ALL) ALL


# Uncomment to allow people in group wheel to run all commands
# %wheel    ALL=(ALL)   ALL

# Same thing without a password
# %wheel    ALL=(ALL)   NOPASSWD: ALL

# Samples
# %users  ALL=/sbin/mount /cdrom,/sbin/umount /cdrom
# %users  localhost=/sbin/shutdown -h now

#aaron  ALL= /usr/bin /sbin/mount /cdrom,/sbin/umount /cdrom

EOF




# the following is to stop windows admins accidentally rebooting linux boxes when they share a KVM with windows
echo "#"
echo "# Disabling shutdown (CTRL/ALT/DEL)"
echo "#"
mv /etc/inittab /etc/inittab.bak
sed -e "s/^pf:/#pf:/" -e "s/^pr:/#pr:/" -e "s/^ca:/#ca:/"  /etc/inittab.bak &gt; /etc/inittab
chmod 700 /etc/inittab
chown root:root /etc/inittab
echo;echo


#echo "#"
#echo "# Disable xinetd"
#echo "#"
#for service in `ls -1 /etc/xinetd.d`; do chkconfig $service off; done
#echo ;echo



echo " creating MOTD"
echo "" &gt; /etc/motd
echo "+----------------------------------------------------+" &gt;&gt; /etc/motd
echo "| This system is the property of ME                  |" &gt;&gt; /etc/motd
echo "+----------------------------------------------------+" &gt;&gt; /etc/motd
echo ""&gt;&gt; /etc/motd









# This will install mondo from an NFS mount and copy the config file

#local mount point for NFS
TEMP_MOUNT=/tmp/software
mkdir $TEMP_MOUNT

# Source of NSF share
NFS_SERVER=xxxxx.xxxxx.com
NFS_SHARE=/u1/software
APP_VERSION=mondo-v2.2
NFS_PATH=$NFS_SHARE/$APP_VERSION/


echo "mounting nfs share to install extra software"

mount $NFS_SERVER:$NFS_SHARE  $TEMP_MOUNT

# create diectories for mondo cd images
mkdir /u1
mkdir /u1/iso
mkdir /u1/iso/tmp
mkdir /u1/mondo



echo "# install of mondo packages"

#echo "installing mkisofs"
#rpm -ivh  $TEMP_MOUNT/$APP_VERSION/mkisofs-2.0-11.i386.rpm

#echo "installing cdrecord"
#rpm -ivh  $TEMP_MOUNT/$APP_VERSION/cdrecord-2.0-11.i386.rpm

echo "installing buffer"
rpm -ivh  $TEMP_MOUNT/$APP_VERSION/buffer-1.19-4.i386.rpm

echo "installing afio"
rpm -ivh  $TEMP_MOUNT/$APP_VERSION/afio-2.4.7-1.i386.rpm

echo "installing mindi"
rpm -ivh  $TEMP_MOUNT/$APP_VERSION/mindi-1.06-266.rhel3.i386.rpm

echo "installing mondo"
rpm -ivh  $TEMP_MOUNT/$APP_VERSION/mondo-2.2.0-2.rhel3.i586.rpm

# copy mondo run script
mkdir /usr/local/admin
cp  $TEMP_MOUNT/$APP_VERSION/mondo.sh /usr/local/admin/mondo
chmod 744 /usr/local/admin/mondo


echo "# Install of Nagios Agent"

# swap this variable from mondo to nagios
APP_VERSION=nagios-agent-2.5.2



rpm -Uvh $TEMP_MOUNT/$APP_VERSION/fping-2.4-1.b2.2.el4.rf.i386.rpm
rpm -Uvh $TEMP_MOUNT/$APP_VERSION/perl-Crypt-DES-2.05-3.2.el4.rf.i386.rpm
rpm -Uvh $TEMP_MOUNT/$APP_VERSION/perl-Digest-SHA1-2.07-5.i386.rpm
rpm -Uvh $TEMP_MOUNT/$APP_VERSION/perl-Digest-HMAC-1.01-13.noarch.rpm
rpm -Uvh $TEMP_MOUNT/$APP_VERSION/perl-Socket6-0.19-1.2.el4.rf.i386.rpm
rpm -Uvh $TEMP_MOUNT/$APP_VERSION/perl-Net-SNMP-5.2.0-1.2.el4.rf.noarch.rpm
rpm -Uvh $TEMP_MOUNT/$APP_VERSION/nagios-plugins-1.4-2.2.el4.rf.i386.rpm

cp $TEMP_MOUNT/$APP_VERSION/nrpe /usr/sbin
cp $TEMP_MOUNT/$APP_VERSION/nrpe.cfg /etc/nagios
cp $TEMP_MOUNT/$APP_VERSION/nrpe.xinetd /etc/xinetd.d/nrpe
echo "nrpe        5666/tcp     #nagios agent" &gt;&gt; /etc/services
useradd nagios
cp $TEMP_MOUNT/$APP_VERSION/check_nrpe /usr/lib/nagios/plugins/
cp $TEMP_MOUNT/$APP_VERSION/check_procs /usr/lib/nagios/plugins/




echo "editing the fstab file to remove the strange LABEL for the swap partition"
# with out changing this mondo restore gets confused

cp /etc/fstab /etc/fstab.bak
cat /etc/fstab.bak | sed s/LABEL\=SW\-/\\/dev\\// &gt; /etc/fstab



echo "fstab has been edited"




echo "installing XXXX custom grub splash screen"
APP_VERSION=grub_custom_XXXX


echo "swapping the redhat grub splash screen with custom logo"
cp /boot/grub/splash.xpm.gz /boot/grub/splash.xpm.gz.orig
cp $TEMP_MOUNT/$APP_VERSION/XXXX_grub_grey.xpm.gz /boot/grub/splash.xpm.gz
</code></pre>
              
            </div>
          </div>
          

<footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      <!--  <a href="../satellite_spacewalk/perl_script_to_calulate_uptime_of_satellite_clients/" class="btn btn-neutral float-right" title="Perl script to calulate uptime of satellite clients"/>Next <span class="icon icon-circle-arrow-right"></span></a> -->
        <a href="../satellite_spacewalk/perl_script_to_calulate_uptime_of_satellite_clients/index.html" class="btn btn-neutral float-right" title="Perl script to calulate uptime of satellite clients">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
      <!-- <a href="../../Time/linux_clocksource_benchmark-2.c/" class="btn btn-neutral" title="Linux clocksource benchmark 2.c"><span class="icon icon-circle-arrow-left"></span> Previous</a> -->
        <a href="../../Time/linux_clocksource_benchmark-2.c/index.html" class="btn btn-neutral" title="Linux clocksource benchmark 2.c"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  <!-- Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. -->
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../../Time/linux_clocksource_benchmark-2.c/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../satellite_spacewalk/perl_script_to_calulate_uptime_of_satellite_clients/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
